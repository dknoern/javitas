<div class=" main-content">
  <div class=" header bg-gradient-default py-7 py-lg-8 pt-lg-9">


    <div class="separator separator-bottom separator-skew zindex-100">
      <svg x="0" y="0" viewBox="0 0 2560 100" preserveAspectRatio="none" version="1.1"
        xmlns="http://www.w3.org/2000/svg">
        <polygon class="fill-default" points="2560 0 2560 100 0 100"></polygon>
      </svg>
    </div>
  </div>

  <div class=" container mt--8 pb-5">
    <div class=" row justify-content-center">
      <div class=" col-lg-6">
        <div class=" card">
          <div class=" card-body" *ngIf="order">

            <!-- repair info-->
            <div class="row">
              <div class="col">
                <h3 class=" card-title mb-3">Repair Info</h3>
              </div>
              <div class="col">
                <a routerLinkActive="active" [routerLink]="['/examples/repairs']">
                  <button aria-label="Close" class=" close" data-dismiss="modal" type="button">
                    <span aria-hidden="true"> × </span>
                  </button></a>
              </div>
            </div>
            <div *ngIf="order.orderNumber">
              <p class=" text-sm text-muted mb-0">Order Number</p>
              <p class=" card-text mb-4">
                {{order.orderNumber}}
              </p>
            </div>
            <div *ngIf="order.manufacturer">
              <p class=" text-sm text-muted mb-0">Manufacturer</p>
              <p class=" card-text mb-4">
                {{order.manufacturer}}
              </p>
            </div>
            <div *ngIf="order.model">
              <p class=" text-sm text-muted mb-0">Model</p>
              <p class=" card-text mb-4">
                {{order.model}}
              </p>
            </div>
            <div *ngIf="order.serialNumber">
              <p class=" text-sm text-muted mb-0">Serial Number</p>
              <p class=" card-text mb-4">
                {{order.serialNumber}}
              </p>
            </div>
            <div *ngIf="order.age">
              <p class=" text-sm text-muted mb-0">Age</p>
              <p class=" card-text mb-4">
                {{order.age}} years
              </p>
            </div>
            <div *ngIf="order.createdDate">
              <p class=" text-sm text-muted mb-0">Requested</p>
              <p class=" card-text mb-4">
                {{order.createdDate}}
              </p>
            </div>
            <div *ngIf="order.status">
              <p class=" text-sm text-muted mb-0">Order Status</p>
              <p class=" card-text mb-4">
                {{order.status}}
              </p>
            </div>

            <!-- action buttons-->
            <div class="mb-4">
              <button class=" btn btn-primary btn-sm" type="button" (click)="openDefaultModal(modalDefault)">
                Add photo
              </button>
              <button class=" btn btn-primary btn-sm" type="button" [print]="['packing-slip']">
                Print packing slip
              </button>
              <button *ngIf="!isAdmin && estimate.necessaryServices" class=" btn btn-primary btn-sm" type="button" (click)="openEstimateModal(modalEstimate)">
                Review estimate
              </button>
              <button class=" btn btn-primary btn-sm" type="button" (click)="openMessageModal(modalMessage)">
                Send Message
              </button>

            </div>

            <!-- packing slip-->
            <div id="packing-slip-wrapper" hidden="hidden">
              <div id="packing-slip" class="mb-4 mt-4 ml-4 mr-4">
                <div>
                  <img src="assets/img/brand/blue.png" width="150" />
                </div>
                <h1>Repair Packing Slip</h1>
                <h4>Instuctions</h4>
                <p>
                  Ship your watch for repair along with this packing slip.
                  Be sure to insure your shipment for the value of the contents.
                </p>
                <h4>Ship to:</h4>
                <p>
                  Authorized Watch Repair<br />
                  123 Anystreet<br />
                  Suite 456<br />
                  Dallas, TX 70051<br />
                </p>
                <h4 class="mt-4">Repair info:</h4>
                <div *ngIf="order.orderNumber">
                  <p class=" mb-0">Order Number</p>
                  <p class=" mb-4">
                    {{order.orderNumber}}
                  </p>
                </div>
                <div *ngIf="order.manufacturer">
                  <p class=" mb-0">Manufacturer</p>
                  <p class=" mb-4">
                    {{order.manufacturer}}
                  </p>
                </div>
                <div *ngIf="order.model">
                  <p class=" mb-0">Model</p>
                  <p class=" mb-4">
                    {{order.model}}
                  </p>
                </div>
                <div *ngIf="order.serialNumber">
                  <p class=" mb-0">Serial Number</p>
                  <p class=" mb-4">
                    {{order.serialNumber}}
                  </p>
                </div>
                <div *ngIf="order.age">
                  <p class=" mb-0">Age</p>
                  <p class=" mb-4">
                    {{order.age}} years
                  </p>
                </div>
                <div *ngIf="order.createdDate">
                  <p class=" mb-0">Requested</p>
                  <p class=" mb-4">
                    {{order.createdDate}}
                  </p>
                </div>
                <div *ngIf="order.manufacturer">
                  <p class=" mb-0">Customer</p>
                  <p class=" mb-4">
                    {{user.attributes.given_name}} {{user.attributes.family_name}}<br />
                    {{user.attributes.address}}<br />
                    {{user.attributes.phone_number}}<br />
                    {{order.email}}<br />
                  </p>
                </div>
                <h4>Photos:</h4>
                <span *ngFor='let photoURL of photoURLs; let i = index'>
                  <a (click)="openPhotoDetailModal(modalPhotoDetail,photoURL,i)">
                    <img src="{{photoURL}}" width="150px" /></a>
                </span>
              </div>
            </div>

            <!-- Image upload modal -->
            <ng-template #modalDefault>
              <div class=" modal-header">
                <h6 class=" modal-title" id="modal-title-default">
                  Image Upload
                </h6>
                <button aria-label="Close" class=" close" data-dismiss="modal" type="button"
                  (click)="defaultModal.hide()">
                  <span aria-hidden="true"> × </span>
                </button>
              </div>
              <div class=" modal-body">
                <p>
                  Please upload one or more photo of your watch before you send it to us.
                </p>
                <div>
                  <p class=" text-sm text-muted mb-0">Please add one or more picture of the watch to be repaired.</p>
                  <ngx-dropzone (change)="onSelect($event)" multiple="false"
                    accept="image/jpeg,image/jpg,image/png,image/gif">
                    <ngx-dropzone-label>Drop image here or click to select.</ngx-dropzone-label>
                    <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files" [file]="f"
                      [removable]="true" (removed)="onRemove(f)">
                    </ngx-dropzone-image-preview>
                  </ngx-dropzone>
                </div>
              </div>
              <div class=" modal-footer">
                <button class=" btn btn-primary" type="button" (click)="uploadFile()">
                  Upload
                </button>
                <button class=" btn btn-link ml-auto" data-dismiss="modal" type="button" (click)="defaultModal.hide()">
                  Cancel
                </button>
              </div>
            </ng-template>

            <!-- Photo detail modal -->
            <ng-template #modalPhotoDetail>
              <div class=" modal-header">
                <h6 class=" modal-title" id="modal-title-default">
                  Repair image
                </h6>
                <button aria-label="Close" class=" close" data-dismiss="modal" type="button"
                  (click)="photoDetailModal.hide()">
                  <span aria-hidden="true"> × </span>
                </button>
              </div>
              <div class=" modal-body">
                <div class=" row justify-content-center">
                  <img style="max-width: 100%" src="{{selectedPhotoURL}}" />
                </div>
                <div class=" row justify-content-center"><a href="javascript:void(0);"
                    (click)="deleteSelectedImage()">Delete image</a></div>
              </div>
            </ng-template>

            <!-- Estimate review modal -->
            <ng-template #modalEstimate>
              <div class=" modal-header">
                <h6 class=" modal-title" id="modal-title-default">
                  Review estimate
                </h6>
                <button aria-label="Close" class=" close" data-dismiss="modal" type="button"
                  (click)="estimateModal.hide()">
                  <span aria-hidden="true"> × </span>
                </button>
              </div>
              <div class=" modal-body">
                <app-estimate-review [estimate]="estimate" [modal]="estimateModal"></app-estimate-review>
              </div>
            </ng-template>
            
            <!-- Message modal -->
            <ng-template #modalMessage>
              <div class=" modal-header">
                <h6 class=" modal-title" id="modal-title-default">
                  Send message
                </h6>
                <button aria-label="Close" class=" close" data-dismiss="modal" type="button" (click)="messageModal.hide()">
                  <span aria-hidden="true"> × </span>
                </button>
              </div>
              <div class=" modal-body">
                <app-message [modal]="messageModal" [user]="user"></app-message>
              </div>
            </ng-template>

            <!-- list photos -->
            <span *ngFor='let photoURL of photoURLs; let i = index'>
              <a (click)="openPhotoDetailModal(modalPhotoDetail,photoURL,i)">
                <img src="{{photoURL}}" width="100px" /></a>
            </span>

            <!-- estimate view-->
            <app-estimate-view [estimate]="estimate" [isAdmin]="isAdmin"></app-estimate-view>
          </div>
        </div>
      </div>




      <div class=" col-lg-5">
        <div class=" card">
          <div class=" card-header bg-transparent">
            <h3 class=" mb-0">Timeline</h3>
          </div>
  
          <div class=" card-body">
            <div
              class=" timeline timeline-one-side"
              data-timeline-axis-style="dashed"
              data-timeline-content="axis"
            >
              <div class=" timeline-block">
                <span class=" timeline-step badge-success">
                  <i class=" ni ni-check-bold"> </i>
                </span>
  
                <div class=" timeline-content">
                  <small class=" text-muted font-weight-bold">

                    <div *ngIf="order">{{ order.createdDate}}</div>
                    <div *ngIf="!order">Todo</div>
                    </small>
  
                  <h5 class=" mt-3 mb-0">Repair requested</h5>
  
                  <p class=" text-sm mt-1 mb-0">
                    Repair form was submitted for review by Advanced Watch Repair.
                  </p>
                </div>
              </div>
  
              <div class=" timeline-block">
                <span class=" timeline-step badge-danger">
                </span>
                <div class=" timeline-content">
                  <small class=" text-muted font-weight-bold"> Todo </small>
                  <h5 class=" mt-3 mb-0">Watch shipped</h5>
                  <p class=" text-sm mt-1 mb-0">
                    After you have completed the repair request, print out the packing slip
                    and send it along with the watch to Advanced Watch Repair.
                  </p>
                </div>
              </div>
       
              <div class=" timeline-block">
                <span class=" timeline-step badge-danger">
                </span>
                <div class=" timeline-content">
                  <small class=" text-muted font-weight-bold"> Todo </small>
                  <h5 class=" mt-3 mb-0">Watch received</h5>
                  <p class=" text-sm mt-1 mb-0">
                    Advanced Watch Repair will notify you when the watch is received.
                  </p>
                </div>
              </div>

              <div class=" timeline-block">
                <span class=" timeline-step badge-danger">
                </span>
                <div class=" timeline-content">
                  <small class=" text-muted font-weight-bold"> Todo </small>
                  <h5 class=" mt-3 mb-0">Estimate created</h5>
                  <p class=" text-sm mt-1 mb-0">
                    An estimate will be created for your review.
                  </p>
                </div>
              </div>

              <div class=" timeline-block">
                <span class=" timeline-step badge-danger">
                </span>
                <div class=" timeline-content">
                  <small class=" text-muted font-weight-bold"> Todo </small>
                  <h5 class=" mt-3 mb-0">Estimate appvoved</h5>
                  <p class=" text-sm mt-1 mb-0">
                    You will review the estimate approving the services you would like performed.
                  </p>
                </div>
              </div>

              <div class=" timeline-block">
                <span class=" timeline-step badge-danger">
                </span>
                <div class=" timeline-content">
                  <small class=" text-muted font-weight-bold"> Todo </small>
                  <h5 class=" mt-3 mb-0">Parts ordered, service started</h5>
                  <p class=" text-sm mt-1 mb-0">
                    We will order parts and begin the service.
                  </p>
                </div>
              </div>

              <div class=" timeline-block">
                <span class=" timeline-step badge-danger">
                </span>
                <div class=" timeline-content">
                  <small class=" text-muted font-weight-bold"> Todo </small>
                  <h5 class=" mt-3 mb-0">Service completed</h5>
                  <p class=" text-sm mt-1 mb-0">
                    We will notify you when the service is completed.
                  </p>
                </div>
              </div>

              <div class=" timeline-block">
                <span class=" timeline-step badge-danger">
                </span>
                <div class=" timeline-content">
                  <small class=" text-muted font-weight-bold"> Todo </small>
                  <h5 class=" mt-3 mb-0">Watch shipped back</h5>
                  <p class=" text-sm mt-1 mb-0">
                    Finally, we will let you know when your repaired watch is on its way back to you.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>







    </div>
  </div>
</div>